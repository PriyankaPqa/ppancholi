parameters:
  packageFeed: ''
  buildCommand: ''
  workingDir: ''
  lokaliseCommand: ''
  lokalise: ''

steps:
  - task: NodeTool@0
    inputs:
      versionSpec: '16.x'
    displayName: 'Install Node.js'

  - template: '../steps/cache-install-npm.yml'
    parameters:
      packageFeed: ${{ parameters.packageFeed }}

  - script: yarn ${{ parameters.lokaliseCommand }}
    displayName: 'Lokalise Sync'
    workingDirectory: ${{ parameters.workingDir }}
    condition: and(succeeded(), eq('${{ parameters.lokalise }}', true))

  - script: yarn ${{ parameters.buildCommand }}
    displayName: 'Build'
    workingDirectory: ${{ parameters.workingDir }}

